---
- name: "Check if java present"
  shell: java -version
  register: javaversion
  failed_when: false

- name: Print Java Version
  debug:
    var: javaversion.stderr_lines

- name: Remove Java old Packages if they exist
  package:
    name: "java"
    state: absent
  when: javaversion.rc == 0

- name: Installing Java-11
  package:
    name: "{{ item }}"
    state: latest
  loop:
    - java-11-openjdk
    - java-11-openjdk-devel

- name: Sleep for 30 seconds and continue with play ...
  wait_for: timeout=30
  delegate_to: localhost