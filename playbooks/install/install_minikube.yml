# ---
# - name: Install minikube
#   become: yes
#   gather_facts: No
#   hosts: "{{ host }}"

#   tasks:
#     - name: Configuring repository for kubectl
#       yum_repository:
#         name: Kubernetes
#         description: Kubectl
#         baseurl: https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
#         gpgcheck: yes
#         gpgkey: https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
#         repo_gpgcheck: yes

#     - name: Installing kubectl
#       yum:
#         name: kubectl
#         state: present

#     - name: Installing conntrack
#       yum:
#         name: conntrack
#         state: present

#     - name: Downloading minikube
#       get_url:
#         url: https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
#         dest: /root/minikube-linux-amd64

#     - name: Installing minikube
#       yum:
#         name: /root/minikube-linux-amd64
#         state: present

#     - name: Starting Minikube driver using none
#       command: minikube start --driver=none

# ---
# - name: Install minikube
#   become: yes
#   gather_facts: No
#   hosts: "{{ host }}"
#   roles:
#     - darkwizard242.crictl
#   vars:
#     crictl_app: crictl
#     crictl_version: 1.22.0
#     crictl_os: linux
#     crictl_arch: amd64
#     crictl_dl_url: https://github.com/kubernetes-sigs/cri-tools/releases/download/v{{ crictl_version }}/{{ crictl_app }}-v{{ crictl_version }}-{{ crictl_os }}-{{ crictl_arch }}.tar.gz
#     crictl_bin_path: /usr/local/bin
#     crictl_file_owner: root
#     crictl_file_group: root

---
- name: Install Jenkins
  become: yes
  gather_facts: No
  hosts: "{{ host }}"

  tasks:
    - name: users is configured
      import_role:
        name: crivetimihai.users
      vars:
        users_groups:
          - wheel

        users_username:
          - name: devops
            sudo: true
            shell: /usr/bin/bash
            groups: wheel
            ssh_key: "{{ lookup('file', lookup('env','HOME') \
              + '/.ssh/id_rsa.pub') }}"
            comment: 'Created by ansible'
      tags: users