---
- name: Check whether a package is installed
  become: true
  become_method: sudo
  gather_facts: false
  hosts: "{{ host }}"

  tasks:
    - name: Gather the package facts
      ansible.builtin.package_facts:
        manager: auto

    - name: Package status
      debug:
        msg: "{{ item }} {{ 'installed' if item in ansible_facts.packages else 'not installed' }}"
      loop: "{{ pkgs | default([]) }}"